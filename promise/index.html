<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>promise</title>
	
</head>
<body>
	<script>
		/*
		> 两个原型方法：
			 promise.prototype.then()
			 promise.prototype.catch()

		> 两个常用的静态方法：
			 promise.all()
			 promise.resolve()

			new Promise(cb)
				Pending(进行中) ===> Resolved(已完成)
			 	Pending(进行中) ===> Rejected(已失败)
		*/
		const imgs=['1.jpg','2.jpg','3.jpg'];
		// Promise有2个参数,第一个代表异步操作执行成功的回调函数，
		// 第二个参数代表失败的回调函数
		const p=new Promise(function(resolve,reject){
			const img=new Image();
			img.src=imgs[6];

			// 当图片加载成功，执行resolve
			img.onload=function(){
				resolve(this);
			};
			// 当图片加载失败，执行
			img.onerror=function(){
				// reject(this);
				reject(new Error('图片加载失败'));
			};
		})
		console.log(123);
		// 当Promise对象创建完成，调用then()方法
		// then()接收2个参数，第一个参数resolve函数,第二个参数reject函数
		// 但不推荐写第二个参数来捕获异常，用catch()
		// p.then(function(aa){
		// 	console.log('加载完成');
		// 	document.body.appendChild(aa);
		// },function(bb){
		// 	console.log(bb);
		// });
		p.then(function(aa){
			document.body.appendChild(aa);
		}).catch(function(bb){
			console.log(bb);
		})
		console.log(456);
	</script>
</body>
</html>